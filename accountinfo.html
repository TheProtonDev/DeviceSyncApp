<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>DeviceSync</title>
    <meta name="description" content="Cross Platform Multi-Device Clipboard Software">
    <meta name="" content="">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/img/DeviceSync%20Icon.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/img/DeviceSync%20Icon.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Risque&amp;display=swap">
    <link rel="stylesheet" href="assets/css/Sansation.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Share+Tech&amp;display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/Drag-Drop-File-Input-Upload.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>
    <div id="ifLoggedin" style="/*display: none;*//*visibility: hidden;*/">
        <div class="d-flex d-xl-flex d-xxl-flex justify-content-end align-items-center justify-content-xl-end align-items-xl-center justify-content-xxl-end align-items-xxl-center" id="center-1" style="padding-bottom: 15px;padding-top: 11px;padding-right: 9px;"><script>
  function logout(){
    removeCookies();
    window.location='index.html';
  }
</script>
<button class="btn btn-primary btn-grad" onclick="logout()" type="button">Logout</button>
</div><script>
  window.addEventListener('load', function () {
    var welcomeLabel = document.getElementById('welcomeLabel');
    var elementText = welcomeLabel.innerText;
    var username = getCookie("username");
    elementText = elementText + username;
     welcomeLabel.innerText = elementText
  })
</script>

<h3 id="welcomeLabel" class="d-flex d-sm-flex justify-content-center align-items-center justify-content-sm-center" style="padding-top: 22px;font-family: 'Share Tech', sans-serif;color: var(--accent);">Username:Â </h3>

        <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-xl-center align-items-xl-center justify-content-xxl-center align-items-xxl-center" id="center-3" style="padding-top: 20px;color: var(--secondary);">
            <h3 class="d-flex d-sm-flex justify-content-center align-items-center justify-content-sm-center" style="font-family: 'Share Tech', sans-serif;color: var(--secondary);">Profile Picture:</h3>
        </div>
        <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-sm-center justify-content-lg-center justify-content-xl-center align-items-xl-center justify-content-xxl-center align-items-xxl-center" id="center-2" style="padding-bottom: 15px;padding-top: 11px;padding-right: 9px;"><script>
    // Wait till the site is loaded, once loaded check api status, also check if user signed in, if not redirect to index page
    window.addEventListener('load', async function () {
        // Check if the user is signed in
        isLoggedIn();
        const url = "https://devicesync-api.theprotondev.repl.co/getpfpfor?username=" + getCookie("username");
        let jsonResult = await (await fetch(url)).json();
        const pfp = jsonResult.pfp;
        let pfpBox = document.getElementById("profile_pic");
        pfpBox.src = pfp;
    })
</script>
<picture><img id='profile_pic' class="rounded-circle" style="height: 179px;width: 179px;" src="https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fblog.sqlauthority.com%2Fwp-content%2Fuploads%2F2007%2F06%2Fnull.png&f=1&nofb=1"/></picture></div>
        <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-xl-center align-items-xl-center justify-content-xxl-center align-items-xxl-center" id="center-5" style="padding-bottom: 15px;"><script>
window.addEventListener('load', function () {
  const fileInput = document.getElementById('pfpUpload');
  fileInput.onchange = () => {
    const selectedFile = fileInput.files[0];
    const formData = new FormData()
    formData.append('file', selectedFile)
    fetch("https://devicesync-api.theprotondev.repl.co/upload/ocr", {
    method: 'POST',
    body: formData
  }).then(
    response => response.json()
  ).then(
    success => loadOCROutput(success.Success) // Handle the success response object
  ).catch(
    error => console.log(error) // Handle the error response object
  );
};

})
</script>

<input id='pfpUpload' type="file" accept="image/*" required style="display: none;" />
<button class="btn btn-primary btn-grad" id='changePfp' onclick="//$('#pfpUpload').trigger('click')" type="button">Change Profile Picture | Disabled</button>
</div>
        <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-xl-center align-items-xl-center justify-content-xxl-center align-items-xxl-center" id="center-4" style="padding-bottom: 15px;"><button class="btn btn-primary btn-grad" type="button" onclick="window.location=&#39;home.html&#39;">Back</button></div>
    </div>
    <div class="d-xl-flex justify-content-xl-center align-items-xl-center" id="confirmDiv" style="display: none;visibility: hidden;"><script>
function confirmTheme(){
  const onAllDevices = document.getElementById('onAllDevices');
  const uploadToRepo = document.getElementById('uploadToRepo');
  // Set the theme, then process parameters
  const fileInput = document.getElementById('themeUpload');
  const selectedFile = fileInput.files[0];
  // Load the json file
  var readFile = new FileReader();
  readFile.onload = function(e) {
  var contents = e.target.result;
  var json = JSON.parse(contents);
  // Now that json is retrieved, set theme fully
  setTheme(JSON.stringify(json));
  toast('success', "Theme Set!");
  setTimeout(function () {
      window.location = 'home.html';
  }, 3000);
}
  readFile.readAsText(selectedFile);
}
</script>
<button class="btn btn-success" type="button" onclick="confirmTheme()">Confirm Changes</button><button class="btn btn-danger" type="button" onclick="window.location=&#39;home.html&#39;">Discard Changes</button></div>
    <div class="d-xl-flex justify-content-xl-center align-items-xl-center" id="confirmOptions" style="display: none;visibility: hidden;">
        <form>
            <div class="form-check"><input class="form-check-input" type="checkbox" id="onAllDevices"><label class="form-check-label" for="formCheck-1" style="color: var(--secondary);padding-bottom: 13px;">Set Theme For Account On<br>All Devices</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" id="uploadToRepo"><label class="form-check-label" for="formCheck-3" style="color: var(--secondary);padding-bottom: 13px;">Upload To DeviceSync<br>Public Theme Repo</label></div>
        </form>
    </div>
    <div class="d-xl-flex justify-content-xl-center align-items-xl-center" id="confirmOptions-1" style="/*display: none;*//*visibility: hidden;*/"></div>
    <div id="ifNotloggedin" style="display: none;visibility: hidden;"><h3 class="text-center d-flex d-sm-flex justify-content-center align-items-center justify-content-sm-center" style="padding-top: 71px;font-family: 'Share Tech', sans-serif;color: #ff0000;">Hm, You're not supposed to be here<br />Redirecting In 3 Seconds...</h3>
</div>
    <footer style="padding-top: 167px;"><script>
  // Wait till the site is loaded, once loaded check api status, also check if user signed in, if not redirect to index page
  window.addEventListener('load', function () {
    // Check if the user is signed in
    isLoggedIn();
    isAPIUp();
    checkForTheme();
  })
</script>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/protonSnippets.js"></script>
    <script src="assets/js/toast.min.js"></script>
</body>

</html>