<!DOCTYPE html>
<html lang="en" style="height: 150%;">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>DeviceSync</title>
    <meta name="description" content="Cross Platform Multi-Device Clipboard Software">
    <meta name="" content="">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/img/DeviceSync%20Icon.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/img/DeviceSync%20Icon.png">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Risque&amp;display=swap">
    <link rel="stylesheet" href="assets/css/Sansation.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Share+Tech&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/Drag-Drop-File-Input-Upload.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>
    <div id="ifLoggedin" style="/*display: none;*//*visibility: hidden;*/">
        <h3 class="d-flex d-sm-flex justify-content-center align-items-center justify-content-sm-center" style="padding-top: 71px;font-family: 'Share Tech', sans-serif;color: #A441FF;">Upload From Image</h3>
        <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-xl-center justify-content-xxl-center" style="padding-bottom: 15px;padding-top: 11px;padding-right: 9px;"><script>
  function loadOCROutput(text){
    let onTextFound = document.getElementById('onTextFound');
    onTextFound.style = "background: rgba(255,255,255,0);border-style: none; display: block;visibility: visible;";
    document.getElementById('textFound').innerText = text;
  }
  window.addEventListener('load', function () {
  const fileInput = document.getElementById('imageUploader');
  fileInput.onchange = () => {
    const selectedFile = fileInput.files[0];
    const formData = new FormData()
    formData.append('file', selectedFile)
    fetch("https://devicesync-api.theprotondev.repl.co/upload/ocr", {
    method: 'POST',
    body: formData
  }).then(
    response => response.json()
  ).then(
    success => loadOCROutput(success.Success) // Handle the success response object
  ).catch(
    error => console.log(error) // Handle the error response object
  );
};

})
</script>

<div class="files color form-group mb-3" style="width: 450px;"><input id="imageUploader" type="file" name="imageUpload" accept=".png, .jpg, .jpeg, .heic"/></div>
</div>
        <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-xl-center align-items-xl-center justify-content-xxl-center align-items-xxl-center" id="onTextFound" style="padding-bottom: 15px;display: none;visibility: hidden;">
            <div class="card" style="background: rgba(255,255,255,0);border-color: rgba(33,37,41,0);">
                <div class="card-body">
                    <h4 class="card-title" style="color: rgb(0,191,31);">Text Found:</h4>
                    <p class="card-text" id="textFound" style="color: #A441FF;">NULL</p>
                </div>
                <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-xl-center align-items-xl-center justify-content-xxl-center align-items-xxl-center" style="padding-bottom: 15px;"><script>
async function uploadScannedText(){
  textFound = document.getElementById('textFound').innerText;
  await navigator.clipboard.writeText(textFound);
  toast('success', 'Copied Scan Results To Clipboard, redirecting to upload');
  setTimeout(function () {
  window.location='upload.html';
  }, 3000);
}
</script>
<button class="btn btn-primary btn-grad" onclick="uploadScannedText()" type="button">Upload</button>
</div>
            </div>
        </div>
        <div class="d-flex d-xl-flex d-xxl-flex justify-content-center align-items-center justify-content-xl-center align-items-xl-center justify-content-xxl-center align-items-xxl-center" id="backbtn-1" style="padding-bottom: 15px;"><button class="btn btn-primary btn-grad" type="button" onclick="window.location=&#39;home.html&#39;">Back</button></div>
    </div>
    <div id="ifNotloggedin" style="display: none;visibility: hidden;"><h3 class="text-center d-flex d-sm-flex justify-content-center align-items-center justify-content-sm-center" style="padding-top: 71px;font-family: 'Share Tech', sans-serif;color: #ff0000;">Hm, You're not supposed to be here<br />Redirecting In 3 Seconds...</h3>
</div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/protonSnippets.js"></script>
    <script src="assets/js/toast.min.js"></script>
</body>

</html>